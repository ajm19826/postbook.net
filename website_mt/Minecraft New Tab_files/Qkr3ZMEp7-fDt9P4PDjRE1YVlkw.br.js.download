var BrowserExtensions;(function(n){function a(n,t){var i=new l;i.init(n,t)}var s="_BEC",h="TCS",e="aria-selected",u="tab_header",i="tab_invisible",f="tab_inactive",t="b_hide",r="click",o="tab_fallback_centered",c=561600,l=function(){function n(){}return n.prototype.init=function(n,t){var r=this;_w&&_d&&_w._ge&&_w.sj_be&&_w.sj_evt&&_w.sj_ev&&_w.sj_et&&(this.tabCount=n,this.tabSwitchConfigEnabledIndices=t,this.tabHeaders=_ge("tab_headers"),Lib.CssClass.add(this.tabHeaders,i),this.tabPages=_ge("tab_active_pages"),this.tabHeaders&&this.tabPages)&&(sj_evt.bind("onHeaderLoaded",function(n){r.headerLoaded(n[1],n[2],n[3])},!0),sj_evt.fire("onTabControlLoaded"),this.tabSwitchContainer=_ge("be_tbsw"))},n.prototype.initializeTabContentSwitchControl=function(){var e=this,i,n,u,f;this.tabSwitchContainer&&(i=_qs(".be_tbsw_cntrl",this.tabSwitchContainer),n=_qs(".be_tbsw_list",this.tabSwitchContainer),n.childNodes.forEach(function(t){sj_be(t,r,function(){this.handleSwitchControlClick(n,t,i)}.bind(e));sj_be(t,"keydown",function(r){(r.keyCode===13||r.keyCode===32)&&this.handleSwitchControlClick(n,t,i)}.bind(e))}),u=function(i){i.target==this.tabSwitchContainer||this.tabSwitchContainer.contains(i.target)||(Lib.CssClass.add(n,t),sj_ue(_d,r,u))}.bind(this),f=function(){_d.addEventListener(r,u);n.classList.contains(t)?Lib.CssClass.remove(n,t):Lib.CssClass.add(n,t)},sj_be(i,r,f),sj_be(i,"keydown",function(n){(n.keyCode===13||n.keyCode===32)&&f()}))},n.prototype.handleSwitchControlClick=function(n,i,r){var u,f;Lib.CssClass.add(n,t);u=i.getAttribute("data-id");sj_evt.fire("onTabContentSwitch",u);sj_cook.set(s,h,u,!0,"/",c);f=_qs(".be_tbsw_li",r);f.innerHTML=i.innerHTML},n.prototype.pageLoaded=function(n,t){var u=_qs(".tab_fallback",this.tabPages.children[n]),e,r;if(!t&&u){for(u.style.height="200px",u.style.width=""+_ge("tab_control").clientWidth,e=this.tabPages.children[n].children,r=0;r<e.length;r++)Lib.CssClass.add(e[r],i);Lib.CssClass.remove(u,i);Lib.CssClass.add(u,o);this.tabHeaders.children[n].classList.contains(f)||Lib.CssClass.remove(this.tabPages.children[n],i)}else if(u)for(e=this.tabPages.children[n].children,Lib.CssClass.add(u,i),Lib.CssClass.remove(u,o),r=0;r<e.length;r++)e[r].classList.contains("tab_fallback")||Lib.CssClass.remove(e[r],i)},n.prototype.headerLoaded=function(n,t,f){var h=this,s=this.findParentElementByClassName(n,"tab_page"),c,e,l,a,o;if(s&&(c=s.getElementsByClassName(u),c&&c.length!==0)&&(e=c[0],e)){for(this.tabCount==1?Lib.CssClass.remove(e,u):(e.setAttribute("data-tabpage",""+t),sj_be(e,r,function(n){h.headerClick(n.target,f,!1)}),sj_be(e,"keydown",function(n){(n.keyCode===13||n.keyCode===32)&&h.headerClick(n.target,f,!0);(n.keyCode===37||n.keyCode===39)&&h.switchTab(e,n.keyCode===39,f)}),typeof ExtensionAccessibilityHelper!="undefined"&&ExtensionAccessibilityHelper&&ExtensionAccessibilityHelper.handleFocusOutline(e)),Lib.CssClass.add(s,i),l=!1,a=this.tabHeaders.children.length,o=0;o<a;o++)parseInt(this.tabHeaders.children[o].getAttribute("data-tabpage"))>t&&(l=!0,this.tabHeaders.insertBefore(e,this.tabHeaders.children[o]),this.tabPages.insertBefore(s,this.tabPages.children[o]));l||(this.tabHeaders.appendChild(e),this.tabPages.appendChild(s));this.tabHeaders.children.length==this.tabCount&&(this.initializeFeedDisplay(),Lib.CssClass.remove(this.tabHeaders,i),sj_evt.fire("onAllHeadersLoaded"),sj_evt.bind("onPageLoaded",function(n){h.pageLoaded(n[1],n[2])}))}},n.prototype.switchTab=function(n,t,i){t===void 0&&(t=!1);var r=t?n.nextElementSibling:n.previousElementSibling;return r?(r.focus(),this.headerClick(r,i,!0),!0):!1},n.prototype.findParentElementByClassName=function(n,t){for(var i=n;i;){if(i.className.indexOf(t)!==-1)return i;i=i.parentElement}return null},n.prototype.headerClick=function(n,t,i){var e=this.findParentElementByClassName(n,u),r,f;e&&(r=e.getAttribute("data-tabpage"),r)&&(f=parseInt(r),f!==NaN)&&(this.activatePage(f,t),typeof Log!="undefined"&&Log&&typeof Log.Log!="undefined"&&Log.Log("BrowserExtensions","TabControl","TabClicked",!1,"TabIndex",r,"IsFromKeyboard",i+""))},n.prototype.activatePage=function(n,r){for(var u=0;u<this.tabPages.children.length;u++)u===n?(Lib.CssClass.remove(this.tabPages.children[u],i),Lib.CssClass.remove(this.tabHeaders.children[u],f),this.tabSwitchContainer&&this.tabSwitchConfigEnabledIndices&&(this.tabSwitchConfigEnabledIndices.indexOf(n)>-1?Lib.CssClass.remove(this.tabSwitchContainer,t):Lib.CssClass.add(this.tabSwitchContainer,t)),!this.tabHeaders.children[u].getAttribute("tabPageLoaded")&&r?(sj_evt.fire("onTabActivation",n),this.tabHeaders.children[u].setAttribute("tabPageLoaded","1")):r&&sj_evt.fire("onTabChanged"),this.tabHeaders.children[u].setAttribute(e,"true")):(Lib.CssClass.add(this.tabPages.children[u],i),Lib.CssClass.add(this.tabHeaders.children[u],f),this.tabHeaders.children[u].setAttribute(e,"false"))},n.prototype.initializeFeedDisplay=function(){for(var r,u,i=this.tabHeaders.children.length,n=0;n<this.tabHeaders.children.length;n++)r=n,u=sj_cook.get("_BEC","SL"+(r>0?r:"")),u&&u=="0"?(Lib.CssClass.add(this.tabHeaders.children[n],t),Lib.CssClass.add(this.tabPages.children[n],t)):(i=Math.min(i,n),Lib.CssClass.remove(this.tabHeaders.children[n],t),Lib.CssClass.remove(this.tabPages.children[n],t));i!=this.tabHeaders.children.length&&(this.initializeTabContentSwitchControl(),this.activatePage(i,!0))},n}();n.init=a})(BrowserExtensions||(BrowserExtensions={}))