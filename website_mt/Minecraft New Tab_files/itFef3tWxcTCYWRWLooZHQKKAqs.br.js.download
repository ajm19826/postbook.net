var TopSitesModule;(function(n){function s(){var n=_ge("be_settings_main");return n?n.getAttribute("data-extId"):""}function i(){return chrome&&chrome.runtime&&chrome.runtime.sendMessage}function h(n){i()||n(!0);r({hasPermission:"topSites"},function(t){var i=!t||typeof t.topSitesPermission=="undefined"?null:t.topSitesPermission;n(i)})}function c(n){r({requestPermission:"topSites"},function(t){var i=!t||typeof t.topSitesPermission=="undefined"?null:t.topSitesPermission;n(i)})}function l(n){r({removePermission:"topSites"},function(t){var i=!t||typeof t.topSitesPermission=="undefined"?null:t.topSitesPermission;n(i)})}function a(n){var t=[];r({data:"topSites"},function(i){i&&i.topSites&&i.topSites instanceof Array&&(i.topSites.forEach(function(n){return t.push(new TopSitesClassModule.TopSite(n.title,n.url,null,!1))}),n(t.length>0?new TopSitesClassModule.TopSites(t):null))});i()||n(null)}function r(n,t){i()&&chrome.runtime.sendMessage(e,n,t)}function f(n){n===void 0&&(n=!1);var t=_ge("be_topsites");!_ge("be_topsites_list")&&t&&t.getAttribute("data-be-loaded-sites")=="false"&&(t.setAttribute("data-be-loaded-sites","true"),sj_evt.bind("onP1",function(){return sj_ajax("/BrowserExtension/LoadTopSites"+(n?"?isTest=true":""),{callback:function(n,i){n&&t&&i&&i.appendTo(t)}})},!0))}function v(){u(!0)}function y(n){n===void 0&&(n=!1);u(!1);f(n);var i=_ge("be_topsites_list");(!i||Lib.CssClass.contains(i,t))&&sj_evt.bind("topSitesRendered",function(){i=_ge("be_topsites_list");var r=_ge("topSitesToggle_ctrl");(n||r&&Lib.CssClass.contains(r,"toggle_on"))&&i&&Lib.CssClass.remove(i,t)},!0)}function p(n){Lib.CssClass.add(n,o);u(!0)}function u(n){var u=_ge("be_topsites_list"),i,r;u&&(n?Lib.CssClass.add(u,t):Lib.CssClass.remove(u,t));i=_ge("toggle_ts_image");i&&(n?i.setAttribute("class","be_toggle_ts_image_down"):i.setAttribute("class","be_toggle_ts_image_up"));r=_ge("be_ts_label");r&&(n?Lib.CssClass.remove(r,t):Lib.CssClass.add(r,t))}var e=s(),o="b_hide",t="be_ts_hide";n.canSendExtensionMessage=i;n.hasTopSitesPermission=h;n.requestTopSitesPermission=c;n.removeTopSitesPermission=l;n.getTopSitesData=a;n.loadTopSites=f;n.turnOffTopSites=v;n.turnOnTopSites=y;n.disableTopSites=p;n.changeTopSitesVisibility=u})(TopSitesModule||(TopSitesModule={}))