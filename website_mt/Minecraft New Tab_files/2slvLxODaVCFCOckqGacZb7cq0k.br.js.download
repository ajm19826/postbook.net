var ThemeSwitchModule;(function(n){function yi(n,t,r,f,o,c,l,a){(h=_ge(at),h)&&(v=r,s=f,rt=o,e=!a,u=h.getElementsByClassName(nt),d=_ge(at),u)&&(n&&(vt=n,pt(n)),t&&(ai=t.replace(/&amp;/g,"&"),wt()),gi(),rt&&(i=_ge("be_theme_search_input"),bi(),y=_ge("be_empty_menu_text")),!e&&c&&(k=_ge("be_empty"),k&&(l=l?l:200,k.style.height=Math.round(c/2)*(hi+l)-ci+"px")))}function pt(n){var t=_ge("ts_option_".concat(n));t&&dt(t)}function wt(){for(var n=0;n<u.length;n++)sj_be(u[n],tt,bt),sj_be(u[n],it,function(n){n.keyCode===13||n.keyCode===32?bt(n):n.keyCode==27?(o(),Lib.CssClass.remove(t,a),t.focus()):(n.keyCode==38||n.keyCode==40)&&pi(n)})}function pi(n){var t=n.target,i,r;t=kt(t);i=-1;t&&(r=t.getAttribute("data-be-value-index"),i=wi(r,n.keyCode));i>-1&&u[i].focus()}function wi(n,t){for(var f,e=-1,o=-1,s=-1,i=0;i<u.length;i++)if(f=u[i],!Lib.CssClass.contains(f,r))if(o==-1)if(f.getAttribute("data-be-value-index")===n){if(o=i,t==38)break}else e=i;else if(t==40){s=i;break}return t==38?e:s}function bt(n){var t=n.target,i;t=kt(t);t&&(dt(t),i=t.getAttribute("data-be-value-index"),i?(sj_cook.set("_BEC","T",i,!0,"/",li),InstUtils.logEvent(c,l,ii,!1,ft,i),typeof ShareControl!="undefined"&&ShareControl!=null&&ShareControl.setOverlayBanner()):InstUtils.logEvent(c,l,ri,!1,ft,null),_w.location.reload())}function kt(n){for(var t=n;t;){if(Lib.CssClass.contains(t,nt))return t;t=t.parentElement}return null}function dt(n){for(var i,r="toggle",t=0,f=u;t<f.length;t++)i=f[t],Lib.CssClass.remove(i,r),i.setAttribute(ot,"");Lib.CssClass.add(n,r);n.setAttribute(ot,"true")}function bi(){i&&(sj_be(i,"input",gt),sj_be(i,it,function(n){n.keyCode===27?(o(),t.focus(),Lib.CssClass.remove(t,a)):ti(n.keyCode)}),i.setAttribute("aria-autocomplete","list"),sj_evt.bind("vp_themesearch",gt))}function gt(){var n=i.value.replace(new RegExp("[^a-zA-Z.'\\s]","gi"),""),f=i.value.length-n.length,e,o,t;(f>0&&(e=i.selectionStart,o=i.selectionEnd,i.value=n,i.selectionStart=Math.min(e-f,n.length),i.selectionEnd=Math.min(o-f,n.length)),t=0,Array.prototype.forEach.call(u,function(n){n&&(n.getAttribute("data-theme-name").toLowerCase().indexOf(i.value.toLowerCase())!==0?Lib.CssClass.add(n,r):(Lib.CssClass.remove(n,r),t++,t<=2?Lib.CssClass.add(n,ht):Lib.CssClass.remove(n,ht)))}),yt||(InstUtils.logEvent(c,l,ui,!1,oi,i.value),yt=!0),y)&&(t==0?Lib.CssClass.remove(y,r):Lib.CssClass.add(y,r))}function ki(n){n&&Lib.CssClass.add(n,r)}function di(n){n&&(Lib.CssClass.remove(n,r),InstUtils.logEvent(c,l,fi))}function gi(){sj_be(_d,tt,ir);t=_ge(si);ut=_ge("be_tswitchmain");b=_ge("be_bgswitch");w=t.querySelector(".be_theme_menu_icon");f=t.querySelector(".be_theme_close_icon");p=_qs(".be_theme_area");t&&(sj_be(t,et,function(n){Lib.CssClass.add(t,a);ni();n.target.dataset.clicked="true"}),sj_be(t,"mouseup",function(n){n.target.dataset.clicked="false";rt&&i&&i.focus()}),sj_be(t,it,function(n){n.keyCode===13||n.keyCode===32?ni():n.keyCode==27?o():ti(n.keyCode)}),sj_be(t,"focus",function(n){n.target.dataset.clicked!=="true"&&Lib.CssClass.remove(t,a)}),sj_be(t,"blur",function(){Lib.CssClass.add(t,a)}),e||sj_evt.bind("onP1",g));s&&f&&sj_be(f,tt,function(n){n.target==f&&o()})}function nr(){typeof v!="undefined"&&v||(v="");tr();e||g()}function g(n){n===void 0&&(n=0);e=!0;sj_evt.unbind("onP1",g);AjaxRequestProcessor.SendRequest("/BrowserExtension/GetThemes?scenario=".concat(v)+(s?"&features=benewtdd":""),null,function(){},function(){e=!1;n<3&&!e&&g(n+1)},function(n){k&&(k.style.height="0");p.innerHTML+=n;u=h.getElementsByClassName(nt);pt(vt);y=_ge("be_empty_menu_text");wt()},7500)}function ni(){d&&Lib.CssClass.contains(d,r)?nr():o()}function tr(){s&&(f&&Lib.CssClass.remove(f,r),w&&Lib.CssClass.add(w,r),b&&Lib.CssClass.add(b,r));t&&(Lib.CssClass.add(t,ct),Lib.CssClass.add(t,lt),t.setAttribute(st,"true"));di(d)}function o(){ki(d);s&&(f&&Lib.CssClass.add(f,r),w&&Lib.CssClass.remove(w,r),b&&Lib.CssClass.remove(b,r));t&&(Lib.CssClass.remove(t,ct),Lib.CssClass.remove(t,lt),t.setAttribute(st,"false"));sj_ue(vi,et,o);h&&!Lib.CssClass.contains(h,r)&&InstUtils.logEvent(c,l,ei)}function ti(n){p&&s?n==38?p.scrollBy(0,-125):n==40&&p.scrollBy(0,125):(n==38||n==40)&&u[0].focus()}function ir(n){var t=n.target;if(t&&ut){do{if(t==ut)return;t=t.parentNode}while(t);o()}}var nt="ts_option",c="BrowserExtensions",l="ThemeMenu",ii="ChangeSuccess",ri="ChangeFailure",ui="TriedChampionSearch",fi="ThemeSwitchOpen",ei="ThemeSwitchDismiss",oi="Searchinput",ft="cookie",tt="click",it="keydown",et="mousedown",ot="aria-current",st="aria-expanded",r="b_hide",a="be_no_outline",ht="ts_option_no_top",ct="be_tswitch_flat_bottom",lt="be_tswitch_full_width",si="be_tswitch",at="be_tswitchView",hi=14,ci=10,li=561600,v,ai,s,rt,vt,u,i,y,t,p,h,ut,vi,w,f,b,k,d,e,yt;n.init=yi})(ThemeSwitchModule||(ThemeSwitchModule={}))