var SettingsModule;(function(n){function ft(n,t,i,u){var e=this,f;typeof i!="undefined"&&i&&(c=i);r=_ge("be_tbsw");d=u;sj_evt.bind("onAllHeadersLoaded",function(){for(var r,u,f,t=_ge("tab_headers"),i=_ge("tab_active_pages"),n=0;n<c;n++)r="feedToggle_"+n+"_ctrl",u=_ge(r),u&&(f=rt+(n>0?n:""),t&&t.children.length>n&&i&&i.children.length>n&&it(r,g(f),ct.bind(e,u,t.children,i.children,n,f)))},!0);f=it("topLinksToggle_ctrl",g(y),at);l=_ge("bre_sc");n&&ot(t);ht();et(f)}function et(n){n&&f(l,n)}function g(n){var t=sj_cook.get(o,n);return t&&t=="0"?!1:!0}function ot(n){var o=_ge("topSitesToggle"),f=_ge("topSitesToggle_ctrl"),r,s,h;o&&f&&(sj_be(f,"click",function(){return u(n,!0)}),e(o,function(){return u(n,!0)}),r=_ge("toggle_ts_cont"),r&&(sj_be(r,"click",function(){return u(n,!1)}),e(r,function(){return u(n,!1)})),s=Lib.CssClass.contains(f,t),n?TopSitesModule.turnOnTopSites(!0):TopSitesModule.hasTopSitesPermission(function(n){st(n,s,f,r)}),s||(h=_ge("be_ts_label"),h&&Lib.CssClass.remove(h,"be_ts_hide")),Lib.CssClass.remove(o,i))}function st(n,r,u,f){var s=sj_cook.get(o,p),e;s&&s=="1"&&n?!r&&n?(u&&Lib.CssClass.add(u,t),TopSitesModule.turnOnTopSites()):(u&&Lib.CssClass.remove(u,t),TopSitesModule.turnOffTopSites()):n?TopSitesModule.loadTopSites():(e=_ge("be_topsites"),e&&Lib.CssClass.add(e,"be_ts_tempwidth"),f&&Lib.CssClass.remove(f,i))}function ht(){var n=_ge("dseToggle"),t=_ge("dseToggle_ctrl"),i=_ge("dseitemslist");n&&t&&i&&(sj_be(t,"click",nt),e(n,nt),DSEControlModule.hasDSEPermission(function(r){r==null?DSEControlModule.disableDSESetting(n,i):tt(n,t,r)}))}function u(n,i){var e=_ge("topSitesToggle"),r=_ge("topSitesToggle_ctrl"),u,f;e&&r&&(u=Lib.CssClass.contains(r,t),f=TopSitesModule.canSendExtensionMessage(),n||!f?(u?TopSitesModule.turnOffTopSites():TopSitesModule.turnOnTopSites(!0),i||(u?Lib.CssClass.remove(r,t):Lib.CssClass.add(r,t))):u?(r&&!i&&Lib.CssClass.remove(r,t),TopSitesModule.turnOffTopSites()):(r&&!i&&Lib.CssClass.add(r,t),TopSitesModule.hasTopSitesPermission(function(n){n?TopSitesModule.turnOnTopSites():TopSitesModule.requestTopSitesPermission(function(n){n&&TopSitesModule.turnOnTopSites()})})),a(p,!u),InstUtils.logEvent(s,h,u?"DisableTopSites":"EnableTopSites",!1,"IsHamburgerToggle",i))}function nt(){var i=_ge("dseToggle"),n=_ge("dseToggle_ctrl"),r=_ge("dseitemslist"),u;i&&n&&r&&(u=n.classList.contains(t),u?DSEControlModule.removeDSEPermission(function(){DSEControlModule.changeDSEToDefault(r)}):DSEControlModule.requestDSEPermission(function(t){tt(i,n,t)}))}function tt(n,t,i){i?DSEControlModule.turnOnDSEState(n,t):DSEControlModule.turnOffDSEState(n,t)}function a(n,t){var i=t?"1":"0";sj_cook.set(o,n,i,!0,"/",ut)}function f(n,t){n&&(t?Lib.CssClass.remove(n,i):Lib.CssClass.add(n,i))}function it(n,i,r){var u=_ge(n);return u&&(sj_be(u,"click",r),u.parentElement&&u.parentElement.parentElement&&e(u.parentElement.parentElement,r),!i)?(Lib.CssClass.remove(u,t),!1):!0}function ct(n,u,e,o,c){var l,y=_qs(".tab_header_any:not(.tab_inactive)");(n&&(l=n.classList.contains(t)),typeof l!="undefined"&&l!=null)&&(a(c,!l),f(u[o],!l),f(e[o],!l),l||v(u,e,o),!_qs(".tab_header_any:not(.b_hide)")&&r&&Lib.CssClass.add(r,i),l&&parseInt(y.getAttribute("data-tabpage"))==o&&lt(u,e,o),InstUtils.logEvent(s,h,l?"DisableFeed":"EnableFeed",!1,"TabIndex",o))}function v(n,t,u){if(n&&t&&n[u]&&t[u]){r&&u<n.length&&d.indexOf(u)>-1?Lib.CssClass.remove(r,i):r&&Lib.CssClass.add(r,i);u<n.length&&(Lib.CssClass.remove(t[u],k),Lib.CssClass.remove(n[u],b));n[u].getAttribute("tabPageLoaded")?sj_evt.fire("onTabChanged"):sj_evt.fire("onTabActivation",u);n[u].setAttribute(w,"true");for(var f=0;f<c&&f<n.length;f++)f!=u&&(Lib.CssClass.add(n[f],b),Lib.CssClass.add(t[f],k),n[f].setAttribute(w,"false"))}}function lt(n,t,r){for(var u=r+1;u<n.length;u++)if(!Lib.CssClass.contains(n[u],i)){v(n,t,u);return}for(u=r-1;u>=0;u--)if(!Lib.CssClass.contains(n[u],i)){v(n,t,u);return}}function at(){var i=_ge("topLinksToggle_ctrl"),n;(i&&(n=i.classList.contains(t)),typeof n!="undefined"&&n!=null)&&(a(y,!n),f(l,!n),InstUtils.logEvent(s,h,n?"DisableTopLinks":"EnableTopLinks"))}function e(n,t){sj_be(n,"keydown",function(n){(n.keyCode===13||n.keyCode===32)&&(t(),n.stopPropagation())})}var o="_BEC",rt="SL",y="TL",p="TS",t="toggle_on",w="aria-selected",i="b_hide",b="tab_inactive",k="tab_invisible",s="BrowserExtensions",h="Settings",ut=561600,c=0,l,d,r;n.init=ft})(SettingsModule||(SettingsModule={}))